var app=angular.module("app",["ngRoute","ngDropdowns"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"templates/main.html"}).when("/produtos",{templateUrl:"templates/produtos.html",controller:"produtosCtrl"}).when("/sobre",{templateUrl:"templates/sobre.html"}).otherwise("/"),e.html5Mode(!0)}]),app.controller("produtosCtrl",["Bolos","$scope",function(t,e){t.get().then(function(t){e.bolos=t})}]),app.directive("activeLink",["$location",function(t){return{restrict:"A",link:function(e,o,r,n){var a=r.href;e.location=t,e.$watch("location.path()",function(t){"/"==t&&(t="/home");var e=new RegExp(a);e.test(t)?o.addClass("active"):o.removeClass("active")})}}}]),app.directive("bolo",function(){return{restrict:"E",scope:{info:"="},templateUrl:"templates/directives/bolo.html",controller:["$scope","darkenFilter","Cart",function(t,e,o){t.turned=!1,t.info.coberturaDark=e(t.info.cobertura),t.turn=function(){t.turned=!t.turned},t.addToCart=function(t){o.add(t)}}]}}),app.directive("boloSvg",function(){return{restrict:"E",scope:{info:"="},templateUrl:"templates/directives/boloSvg.html",controller:["$scope","darkenFilter",function(t,e){t.$watch("info.cobertura.cor",function(){t.info.coberturaDark=e("#"+t.info.cobertura.cor)})}]}}),app.directive("cart",function(){return{restrict:"E",templateUrl:"templates/directives/cart.html",controller:["$scope","$timeout","Cart",function(t,e,o){t.showCart=!1,t.handleClick=function(){t.showCart=!t.showCart},t.items=o.get(),t.anim=!1,t.$on("cartChange",function(){t.anim=!0,e(function(){t.anim=!1},1e3)})}]}}),app.directive("cartItem",function(){return{restrict:"E",templateUrl:"templates/directives/cartItem.html",scope:{item:"=",index:"="},controller:["$scope","Cart",function(t,e){t.removeItem=function(){e.remove(t.index)}}]}}),app.directive("personalizado",function(){return{restrict:"E",templateUrl:"templates/directives/personalizado.html",controller:["$scope","Cart","Sabores",function(t,e,o){t.hide=!0,t.toggleModal=function(){t.hide=!t.hide},t.sabores={coberturas:[],massas:[],recheios:[]},o.get().then(function(e){t.sabores=e,t.bolo.cobertura=e.coberturas[0],t.bolo.massa=e.massas[0],t.bolo.recheio=e.recheios[0]}),t.bolo={cobertura:{},massa:{},recheio:{},preco:0,nome:"Especial"},t.getPreco=function(){return t.bolo.cobertura.preco+t.bolo.massa.preco+t.bolo.recheio.preco},t.add=function(){t.bolo.preco=t.getPreco(),e.add(t.bolo),t.toggleModal()}}]}}),app.filter("darken",function(){function t(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var o,r,n="#";for(r=0;r<3;r++)o=parseInt(t.substr(2*r,2),16),o=Math.round(Math.min(Math.max(0,o+o*e),255)).toString(16),n+=("00"+o).substr(o.length);return n}return function(e){return t(e,-.2)}}),app.service("Bolos",["$http",function(t){return{get:function(){return t({url:"api/bolos.json",method:"GET"}).then(function(t){return t.data},console.log)}}}]),app.service("Cart",["$http","$rootScope",function(t,e){var o={ar:[],get:function(){return this.ar},fetch:function(){return this.update(),this.get()},update:function(){var t=localStorage.getItem("cart");t&&(this.ar=JSON.parse(t))},set:function(){var t=angular.toJson(this.ar);localStorage.setItem("cart",t),e.$broadcast("cartChange")},add:function(t){this.ar.push(t),this.set()},remove:function(t){this.ar.splice(t,1),this.set()},clear:function(){this.ar=[],this.set()}};return o.fetch(),o}]),app.service("Sabores",["$http",function(t){return{get:function(){return t({url:"api/sabores.json",method:"GET"}).then(function(t){return t.data},console.log)}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInJvdXRlcy5qcyIsImNvbnRyb2xsZXJzL3Byb2R1dG9zLmpzIiwiZGlyZWN0aXZlcy9hY3RpdmVMaW5rLmpzIiwiZGlyZWN0aXZlcy9ib2xvLmpzIiwiZGlyZWN0aXZlcy9ib2xvU3ZnLmpzIiwiZGlyZWN0aXZlcy9jYXJ0LmpzIiwiZGlyZWN0aXZlcy9jYXJ0SXRlbS5qcyIsImRpcmVjdGl2ZXMvcGVyc29uYWxpemFkby5qcyIsImZpbHRlcnMvZGFya2VuLmpzIiwic2VydmljZXMvYm9sb3MuanMiLCJzZXJ2aWNlcy9jYXJ0LmpzIiwic2VydmljZXMvc2Fib3Jlcy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJodG1sNU1vZGUiLCJCb2xvcyIsIiRzY29wZSIsImdldCIsInRoZW4iLCJiIiwiYm9sb3MiLCJkaXJlY3RpdmUiLCIkbG9jYXRpb24iLCJyZXN0cmljdCIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsInBhdGgiLCJocmVmIiwibG9jYXRpb24iLCIkd2F0Y2giLCJuZXdQYXRoIiwicmVnIiwiUmVnRXhwIiwidGVzdCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJpbmZvIiwiZGFya2VuRmlsdGVyIiwiQ2FydCIsInR1cm5lZCIsImNvYmVydHVyYURhcmsiLCJjb2JlcnR1cmEiLCJ0dXJuIiwiYWRkVG9DYXJ0IiwiYm9sbyIsImFkZCIsImNvciIsIiR0aW1lb3V0Iiwic2hvd0NhcnQiLCJoYW5kbGVDbGljayIsIml0ZW1zIiwiYW5pbSIsIiRvbiIsIml0ZW0iLCJpbmRleCIsInJlbW92ZUl0ZW0iLCJyZW1vdmUiLCJTYWJvcmVzIiwiaGlkZSIsInRvZ2dsZU1vZGFsIiwic2Fib3JlcyIsImNvYmVydHVyYXMiLCJtYXNzYXMiLCJyZWNoZWlvcyIsInMiLCJtYXNzYSIsInJlY2hlaW8iLCJwcmVjbyIsIm5vbWUiLCJnZXRQcmVjbyIsImZpbHRlciIsImNvbG9yTHVtaW5hbmNlIiwiaGV4IiwibHVtIiwiU3RyaW5nIiwicmVwbGFjZSIsImxlbmd0aCIsImMiLCJpIiwicmdiIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJNYXRoIiwicm91bmQiLCJtaW4iLCJtYXgiLCJ0b1N0cmluZyIsInNlcnZpY2UiLCIkaHR0cCIsInVybCIsIm1ldGhvZCIsInJlcSIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiJHJvb3RTY29wZSIsImNhcnQiLCJhciIsInRoaXMiLCJmZXRjaCIsInVwZGF0ZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJzZXQiLCJqc29uIiwidG9Kc29uIiwic2V0SXRlbSIsIiRicm9hZGNhc3QiLCJwdXNoIiwic3BsaWNlIiwiY2xlYXIiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxVQUFBLGVDQUFGLEtBQUFHLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxLQUNBQyxZQUFBLHdCQUVBRCxLQUFBLGFBQ0FDLFlBQUEsMEJBQ0FDLFdBQUEsaUJBRUFGLEtBQUEsVUFDQUMsWUFBQSx5QkFFQUUsVUFBQSxLQUVBSixFQUFBSyxXQUFBLE1DZEFWLElBQUFRLFdBQUEsZ0JBQUEsUUFBQSxTQUFBLFNBQUFHLEVBQUFDLEdBQ0FELEVBQUFFLE1BQUFDLEtBQUEsU0FBQUMsR0FDQUgsRUFBQUksTUFBQUQsT0NGQWYsSUFBQWlCLFVBQUEsY0FBQSxZQUFBLFNBQUFDLEdBQ0EsT0FDQUMsU0FBQSxJQUNBQyxLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFmLEdBQ0EsR0FBQWdCLEdBQUFELEVBQUFFLElBQ0FKLEdBQUFLLFNBQUFSLEVBQ0FHLEVBQUFNLE9BQUEsa0JBQUEsU0FBQUMsR0FDQSxLQUFBQSxJQUNBQSxFQUFBLFFB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QSxTQUFBQyxHQUNBLE9BQ0F6RSxJQUFBLFdBQ0EsTUFBQXlFLElBQ0FDLElBQUEsbUJBQ0FDLE9BQUEsUUFDQTFFLEtBQUEsU0FBQTJFLEdBQ0EsTUFBQUEsR0FBQUMsTUFDQUMsUUFBQUMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnLCAnbmdEcm9wZG93bnMnXSk7IiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgJHJvdXRlUHJvdmlkZXJcbiAgLndoZW4oXCIvXCIsIHtcbiAgICB0ZW1wbGF0ZVVybCA6IFwidGVtcGxhdGVzL21haW4uaHRtbFwiXG4gIH0pXG4gIC53aGVuKFwiL3Byb2R1dG9zXCIsIHtcbiAgICB0ZW1wbGF0ZVVybCA6IFwidGVtcGxhdGVzL3Byb2R1dG9zLmh0bWxcIixcbiAgICBjb250cm9sbGVyOiBcInByb2R1dG9zQ3RybFwiXG4gIH0pXG4gIC53aGVuKFwiL3NvYnJlXCIsIHtcbiAgICB0ZW1wbGF0ZVVybCA6IFwidGVtcGxhdGVzL3NvYnJlLmh0bWxcIlxuICB9KVxuICAub3RoZXJ3aXNlKCcvJyk7XG4gIFxuICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59KTsiLCJhcHAuY29udHJvbGxlcihcInByb2R1dG9zQ3RybFwiLCBmdW5jdGlvbihCb2xvcywgJHNjb3BlKXtcbiAgICBCb2xvcy5nZXQoKS50aGVuKGZ1bmN0aW9uKGIpe1xuICAgICAgICAkc2NvcGUuYm9sb3MgPSBiO1xuICAgIH0pO1xufSkiLCJhcHAuZGlyZWN0aXZlKCdhY3RpdmVMaW5rJywgZnVuY3Rpb24oJGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGF0dHJzLmhyZWY7XG4gICAgICAgICAgICBzY29wZS5sb2NhdGlvbiA9ICRsb2NhdGlvbjtcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgnbG9jYXRpb24ucGF0aCgpJywgZnVuY3Rpb24obmV3UGF0aCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdQYXRoID09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BhdGggPSBcIi9ob21lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKHBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChyZWcudGVzdChuZXdQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyIsImFwcC5kaXJlY3RpdmUoJ2JvbG8nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJywgLy9FID0gZWxlbWVudCwgQSA9IGF0dHJpYnV0ZSwgQyA9IGNsYXNzLCBNID0gY29tbWVudCAgICAgICAgIFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgaW5mbzogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2RpcmVjdGl2ZXMvYm9sby5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCBkYXJrZW5GaWx0ZXIsIENhcnQpe1xuICAgICAgICAgICAgJHNjb3BlLnR1cm5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmluZm8uY29iZXJ0dXJhRGFyayA9IGRhcmtlbkZpbHRlcigkc2NvcGUuaW5mby5jb2JlcnR1cmEpO1xuICAgICAgICAgICAgJHNjb3BlLnR1cm4gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS50dXJuZWQgPSAhJHNjb3BlLnR1cm5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgIFxuICAgICAgICAgICAgJHNjb3BlLmFkZFRvQ2FydCA9IGZ1bmN0aW9uKGJvbG8pe1xuICAgICAgICAgICAgICAgIENhcnQuYWRkKGJvbG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7IiwiYXBwLmRpcmVjdGl2ZSgnYm9sb1N2ZycsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLCAvL0UgPSBlbGVtZW50LCBBID0gYXR0cmlidXRlLCBDID0gY2xhc3MsIE0gPSBjb21tZW50ICAgICAgICAgXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBpbmZvOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvZGlyZWN0aXZlcy9ib2xvU3ZnLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsIGRhcmtlbkZpbHRlcil7XG4gICAgICAgICAgICAkc2NvcGUuJHdhdGNoKCdpbmZvLmNvYmVydHVyYS5jb3InLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5pbmZvLmNvYmVydHVyYURhcmsgPSBkYXJrZW5GaWx0ZXIoJyMnICsgJHNjb3BlLmluZm8uY29iZXJ0dXJhLmNvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufSk7IiwiYXBwLmRpcmVjdGl2ZSgnY2FydCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2RpcmVjdGl2ZXMvY2FydC5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgQ2FydCkge1xuICAgICAgICAgICAgJHNjb3BlLnNob3dDYXJ0ID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93Q2FydCA9ICEkc2NvcGUuc2hvd0NhcnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBDYXJ0LmdldCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2NvcGUuYW5pbSA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLiRvbignY2FydENoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFuaW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYW5pbSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIiwiYXBwLmRpcmVjdGl2ZSgnY2FydEl0ZW0nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvZGlyZWN0aXZlcy9jYXJ0SXRlbS5odG1sJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICdpdGVtJyA6ICc9JyxcbiAgICAgICAgICAgICdpbmRleCcgOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCBDYXJ0KXtcbiAgICAgICAgICAgICRzY29wZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBDYXJ0LnJlbW92ZSgkc2NvcGUuaW5kZXgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyIsImFwcC5kaXJlY3RpdmUoJ3BlcnNvbmFsaXphZG8nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9kaXJlY3RpdmVzL3BlcnNvbmFsaXphZG8uaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgQ2FydCwgU2Fib3Jlcykge1xuICAgICAgICAgICAgJHNjb3BlLmhpZGUgPSB0cnVlO1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZU1vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaGlkZSA9ICEkc2NvcGUuaGlkZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJHNjb3BlLnNhYm9yZXMgPSB7XG4gICAgICAgICAgICAgICAgY29iZXJ0dXJhczogW10sXG4gICAgICAgICAgICAgICAgbWFzc2FzOiBbXSxcbiAgICAgICAgICAgICAgICByZWNoZWlvczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBTYWJvcmVzLmdldCgpLnRoZW4oZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWJvcmVzID0gcztcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm9sby5jb2JlcnR1cmEgPSBzLmNvYmVydHVyYXNbMF07XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvbG8ubWFzc2EgPSBzLm1hc3Nhc1swXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm9sby5yZWNoZWlvID0gcy5yZWNoZWlvc1swXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2NvcGUuYm9sbyA9IHtcbiAgICAgICAgICAgICAgICBjb2JlcnR1cmEgOiB7fSxcbiAgICAgICAgICAgICAgICBtYXNzYToge30sXG4gICAgICAgICAgICAgICAgcmVjaGVpbzoge30sXG4gICAgICAgICAgICAgICAgcHJlY286IDAsXG4gICAgICAgICAgICAgICAgbm9tZTogXCJFc3BlY2lhbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRzY29wZS5nZXRQcmVjbyA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5ib2xvLmNvYmVydHVyYS5wcmVjbyArICRzY29wZS5ib2xvLm1hc3NhLnByZWNvICsgJHNjb3BlLmJvbG8ucmVjaGVpby5wcmVjbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJHNjb3BlLmFkZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJvbG8ucHJlY28gPSAkc2NvcGUuZ2V0UHJlY28oKTtcbiAgICAgICAgICAgICAgICBDYXJ0LmFkZCgkc2NvcGUuYm9sbyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZU1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcbiIsImFwcC5maWx0ZXIoJ2RhcmtlbicsIGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGNvbG9yTHVtaW5hbmNlKGhleCwgbHVtKSB7XG4gICAgXG4gICAgXHQvLyB2YWxpZGF0ZSBoZXggc3RyaW5nXG4gICAgXHRoZXggPSBTdHJpbmcoaGV4KS5yZXBsYWNlKC9bXjAtOWEtZl0vZ2ksICcnKTtcbiAgICBcdGlmIChoZXgubGVuZ3RoIDwgNikge1xuICAgIFx0XHRoZXggPSBoZXhbMF0raGV4WzBdK2hleFsxXStoZXhbMV0raGV4WzJdK2hleFsyXTtcbiAgICBcdH1cbiAgICBcdGx1bSA9IGx1bSB8fCAwO1xuICAgIFxuICAgIFx0Ly8gY29udmVydCB0byBkZWNpbWFsIGFuZCBjaGFuZ2UgbHVtaW5vc2l0eVxuICAgIFx0dmFyIHJnYiA9IFwiI1wiLCBjLCBpO1xuICAgIFx0Zm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuICAgIFx0XHRjID0gcGFyc2VJbnQoaGV4LnN1YnN0cihpKjIsMiksIDE2KTtcbiAgICBcdFx0YyA9IE1hdGgucm91bmQoTWF0aC5taW4oTWF0aC5tYXgoMCwgYyArIChjICogbHVtKSksIDI1NSkpLnRvU3RyaW5nKDE2KTtcbiAgICBcdFx0cmdiICs9IChcIjAwXCIrYykuc3Vic3RyKGMubGVuZ3RoKTtcbiAgICBcdH1cbiAgICBcbiAgICBcdHJldHVybiByZ2I7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmdW5jdGlvbihoZXgpe1xuICAgICAgICByZXR1cm4gY29sb3JMdW1pbmFuY2UoaGV4LCAtMC4yKTtcbiAgICB9XG59KSIsImFwcC5zZXJ2aWNlKFwiQm9sb3NcIiwgZnVuY3Rpb24oJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICB1cmw6ICdhcGkvYm9sb3MuanNvbicsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlcSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcS5kYXRhO1xuICAgICAgICAgICAgfSwgY29uc29sZS5sb2cpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJhcHAuc2VydmljZShcIkNhcnRcIiwgZnVuY3Rpb24oJGh0dHAsICRyb290U2NvcGUpIHtcbiAgICB2YXIgY2FydD0ge1xuICAgICAgICBhcjogW10sXG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcjtcbiAgICAgICAgfSxcbiAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBjYXJ0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKTtcbiAgICAgICAgICAgIGlmIChjYXJ0KXtcbiAgICAgICAgICAgICAgICB0aGlzLmFyID0gIEpTT04ucGFyc2UoY2FydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBqc29uID0gYW5ndWxhci50b0pzb24odGhpcy5hcik7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIGpzb24pO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjYXJ0Q2hhbmdlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZDogZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICB0aGlzLmFyLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB0aGlzLnNldCgpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgICAgIHRoaXMuYXIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuc2V0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNsZWFyOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5hciA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZXQoKVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjYXJ0LmZldGNoKCk7XG4gICAgcmV0dXJuIGNhcnQ7XG59KTtcbiIsImFwcC5zZXJ2aWNlKFwiU2Fib3Jlc1wiLCBmdW5jdGlvbigkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIHVybDogJ2FwaS9zYWJvcmVzLmpzb24nLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXEpe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXEuZGF0YTtcbiAgICAgICAgICAgIH0sIGNvbnNvbGUubG9nKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIl19
